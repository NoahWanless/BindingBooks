{% extends "base.html" %}

{% block nav_home_active %} active{% endblock nav_home_active %}
{% block content %}
 {% if has_genre_recs %}
 <h2>Books in your favorite genre: {{ favorite_genre_label }}</h2>
 <div class="row">
   {% for book in genre_recs %}
     <div class="col-md-3">
       <div class="card mb-3">
         <img src="{{ book.product_images.0 }}" class="card-img-top">
         <div class="card-body">
           <h5 class="card-title">{{ book.product_name }}</h5>
           <p class="card-text">{{ book.product_description|truncatechars:80 }}</p>
           <a href="{% url 'products:product_details' book.pk %}" class="btn btn-primary">View</a>
         </div>
       </div>
     </div>
   {% endfor %}
 </div>
 <br>
 {% endif %}

 {% if recent_books %}
 <h2>New &amp; Noteworthy</h2>
 <div class="row">
   {% for book in recent_books %}
     <div class="col-md-3">
       <div class="card mb-3">
         <img src="{{ book.product_images.0 }}" class="card-img-top">
         <div class="card-body">
           <h5 class="card-title">{{ book.product_name }}</h5>
           <p class="card-text">{{ book.product_description|truncatechars:80 }}</p>
           <a href="{% url 'products:product_details' book.pk %}" class="btn btn-primary">View</a>
         </div>
       </div>
     </div>
   {% endfor %}
 </div>
 <br>
 {% endif %}

 <h2>Your Favorite Books</h2>

{% if favorites %}
  <div class="row">
    {% for book in favorites %}
      <div class="col-md-3">
        <div class="card mb-3">
          <img src="{{ book.product_images.0 }}" class="card-img-top">
          <div class="card-body">
            <h5 class="card-title">{{ book.product_name }}</h5>
            <p class="card-text">{{ book.product_description|truncatechars:80 }}</p>
            <a href="{% url 'products:product_details' book.pk %}" class="btn btn-primary">View</a>
          </div>
        </div>
      </div>
    {% endfor %}
  </div>
{% else %}
  <p>You haven't favorited any books yet.</p>
{% endif %}
<br>
<h2>Your Books</h2>
{% if owned_books %}
  <div class="row">
    {% for book in owned_books %}
      <div class="col-md-3">
        <div class="card mb-3">
          <img src="{{ book.product_images.0 }}" class="card-img-top">
          <div class="card-body">
            <h5 class="card-title">{{ book.product_name }}</h5>
            <p class="card-text">{{ book.product_description|truncatechars:80 }}</p>
            <a href="{% url 'products:product_details' book.pk %}" class="btn btn-primary">View</a>
          </div>
        </div>
      </div>
    {% endfor %}
  </div>
{% else %}
  <p>You dont own any books yet.</p>
{% endif %}


{% endblock content %}